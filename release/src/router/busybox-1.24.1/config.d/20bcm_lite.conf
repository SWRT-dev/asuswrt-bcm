#!/usr/bin/env perl

#
# DO NOT EDIT THIS FILE
#
# This file reads .config, makes changes, and writes it back
# if you need to make further changes, COPY this file to another
# executable file in the config.d directory with a .conf extension 
# and replace the ACTIONS section with your own
#

use strict;
use warnings;
use BRCM::GenConfig;

my $g;
if (!@ARGV){
  print "\n Use the default configuration file. e.g. .config \n"; 
  $g = new BRCM::GenConfig('.config');
}else{
  $g = new BRCM::GenConfig($ARGV[0]);
}

# ACTIONS start here

$g->set( "CONFIG_PREFIX", qq["$ENV{INSTALL_DIR}"] );

if ( $ENV{BUILD_BUSYBOX_BRCM_LITE} eq 'y' ) {
    $g->unset( "CONFIG_FEATURE_VERBOSE_USAGE");
    $g->unset( "CONFIG_FEATURE_FANCY_SLEEP");
    $g->unset( "CONFIG_STTY");
    $g->unset( "CONFIG_TTY");
    $g->unset( "CONFIG_GREP");
    $g->unset( "CONFIG_FEATURE_INIT_COREDUMPS");
    $g->unset( "CONFIG_DELUSER");
    $g->unset( "CONFIG_DMESG");
    $g->unset( "CONFIG_CHRT");
    $g->unset( "CONFIG_FLASH_ERASEALL");
    $g->unset( "CONFIG_SYSINFO");
    $g->unset( "CONFIG_FEATURE_IPV6");
    $g->unset( "CONFIG_FEATURE_PREFER_IPV4_ADDRESS");
    $g->unset( "CONFIG_FTPGET");
    $g->unset( "CONFIG_PING6");
    #$g->unset( "CONFIG_FEATURE_FANCY_PING");
    $g->unset( "CONFIG_TFTP");
    $g->unset( "CONFIG_TFTPD");
    $g->unset( "CONFIG_BRCMTFTPD");
    $g->unset( "CONFIG_FEATURE_TFTP_GET");
    $g->unset( "CONFIG_FEATURE_TFTP_PUT");
    $g->unset( "CONFIG_VCONFIG");
    $g->unset( "CONFIG_WGET");
    $g->unset( "CONFIG_SYSLOGD");
    $g->unset( "CONFIG_FEATURE_REMOTE_LOG");
    $g->unset( "CONFIG_FEATURE_SYSLOGD_DUP");
    $g->set( "CONFIG_FEATURE_SYSLOGD_READ_BUFFER_SIZE", 0);
    $g->unset( "CONFIG_FEATURE_IPC_SYSLOG");
    $g->set( "CONFIG_FEATURE_IPC_SYSLOG_BUFFER_SIZE, 0");
    $g->unset( "CONFIG_LOGREAD");
    $g->unset( "CONFIG_KLOGD");
    $g->unset( "CONFIG_LOGGER");
    $g->unset( "CONFIG_DD");
    $g->unset( "CONFIG_FEATURE_DD_SIGNAL_HANDLING");
    $g->unset( "CONFIG_FEATURE_DD_THIRD_STATUS_LINE");
    $g->unset( "CONFIG_FEATURE_DD_IBS_OBS");

}

# ACTIONS end here

$g->write();


